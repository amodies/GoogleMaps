<!--
https://jsfiddle.net/amodies/b1597ox2/
-->


<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		<style>
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
			}
			#map {
				height: 100%;
			}
		</style>
	<body>
		<div id="map"></div>
		<script>
			// Create an overlap with geocoded longitude and latitude Simonton tech addresses.  Will show a radius of 175 miles from address.
			// Create the supplier list.
			var techs = {
			  Andrews: {center: {lat: 32.78054, lng: -80.01593}, alias: 'Tom Andrews'},
			  Kirk: {center: {lat: 39.27711, lng: -80.99895}, alias: 'Tim Kirk'},
			  Baker: {center: {lat: 38.26682, lng: -122.05112}, alias: 'Steve Baker'},
			  Stockholm: {center: {lat: 42.65222, lng: -73.49541}, alias: 'Seth Stockholm'},
			  Jordan: {center: {lat: 38.10841, lng: -122.23327}, alias: 'Ron Jordan'},
			  Rose: {center: {lat: 39.95211, lng: -83.68037}, alias: 'Roland Rose'},
			  Wheeler: {center: {lat: 33.92033, lng: -116.86563}, alias: 'Richard Wheeler'},
			  PSmith: {center: {lat: 40.41162, lng: -105.01449}, alias: 'Paul Smith'},
			  Bair: {center: {lat: 43.89776, lng: -88.73285}, alias: 'Mike Bair'},
			  McLucas: {center: {lat: 40.22177, lng: -76.07919}, alias: 'Michael McLucas'},
			  Robbins: {center: {lat: 36.90311, lng: -78.09996}, alias: 'Marty Robbins'},
			  Eschliman: {center: {lat: 28.30764, lng: -82.69527}, alias: 'Mark Eschliman'},
			  Adam: {center: {lat: 42.11417, lng: -80.02571}, alias: 'Mark Adam'},
			  Battles: {center: {lat: 34.85942, lng: -95.63948}, alias: 'Leland Battles'},
			  Burke: {center: {lat: 38.53065, lng: -90.32287}, alias: 'John Burke'},
			  Rushing: {center: {lat: 40.42819, lng: -85.97551}, alias: 'Jim Rushing'},
			  Anderson: {center: {lat: 43.26624, lng: -83.59459}, alias: 'Jeff Anderson'},
			  Lilly: {center: {lat: 40.76879, lng: -75.35175}, alias: 'Gene Lilly'},
			  Guzman: {center: {lat: 38.25478, lng: -122.01594}, alias: 'Francisco Guzman'},
			  Wilkerson: {center: {lat: 38.3799, lng: -121.95657}, alias: 'David Wilkerson'},
			  Thomalla: {center: {lat: 45.36121, lng: -93.68121}, alias: 'Danny Thomalla'},
			  Hillebrand: {center: {lat: 42.07992, lng: -72.31559}, alias: 'Chris Hillebrand'},
			  Tannehill: {center: {lat: 40.39264, lng: -82.47241}, alias: 'Chad Tannehill'},
			  Byers: {center: {lat: 38.33149, lng: -121.96957}, alias: 'Brad Byers'},
			  Mellick: {center: {lat: 35.98248, lng: -79.35154}, alias: 'Bill Mellick'},
			  Cherry: {center: {lat: 38.3799, lng: -121.95657}, alias: 'Anthony Cherry'}
			};

			function initMap() {
			  // Create the map.
			  var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 7,
				center: {lat: 37.090, lng: -95.712},
				mapTypeId: 'roadmap'
			  }); 
			  var icon = {
					url: 'https://www.simonton.com/wp-content/themes/simonton-theme/assets/img/s-logo-old.svg',
					scaledSize: new google.maps.Size(30, 30), // scaled size
					origin: new google.maps.Point(0, 0), // origin
					anchor: new google.maps.Point(15, 15) // anchor
			   };

			  // Construct the circle for each technician's territory.
			  // Note: We scale the area of the circle based on a radius of 175 miles.
			  for (var name in techs) {
				// Add the circle for this city to the map.
				var techArea = new google.maps.Circle({
				  strokeColor: '#108ed4',
				  strokeOpacity: 0.8,
				  strokeWeight: 2,
				  fillColor: '#108ed4',
				  fillOpacity: 0.35,
				  map: map,
				  center: techs[name].center,
				  radius: 281635.2
				});
				var techMarker = new google.maps.Marker({
					position: techs[name].center,
				  map: map,
				  title: techs[name].alias,
				  icon: icon
				});
			  }
			  var geocoder = new google.maps.Geocoder();
			  geocodeAddress(geocoder, map);
			}

			function geocodeAddress(geocoder, resultsMap) {
			  //var address = '5020 Weston Pkwy Cary, NC 27513';
			  var address = "";
			  address += document.getElementById("A0.R0.Custom Object 2 Name).getValue();
			  address += " " + document.getElementById("A0.R0.ZText_35").getValue();
			  address += " " + document.getElementById("A0.R0.ZText_36").getValue() + ",";
			  address += " " + document.getElementById("A0.R0.ZText_38").getValue();
			  geocoder.geocode({'address': address}, function(results, status) {
				if (status === 'OK') {
				  resultsMap.setCenter(results[0].geometry.location);
				  var marker = new google.maps.Marker({
					map: resultsMap,
					position: results[0].geometry.location,
					title: address
				  });
				} else {
				  alert('Geocode was not successful for the following reason: ' + status);
				}
			  });
			}
		</script>
		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpI8ywHqKFDDns3j7LZv-CX1FNFoHvhdY&callback=initMap">
		</script>
	</body>
</html>
